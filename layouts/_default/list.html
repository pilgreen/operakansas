<!DOCTYPE HTML>
<html lang="en">
  <head>
    <title>{{ .Title }}</title>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/0.7.22/webcomponents-lite.min.js"></script>

    <link rel="stylesheet" href="/css/flex-layout.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="import" href="/components/all.vulcanized.html">
  </head>

  <body>
    <template is="dom-bind">
      <iron-media-query query="(max-width: 600px)" query-matches="{{`{{smallScreen}}`}}"></iron-media-query>

      <app-drawer-layout force-narrow>
        <app-drawer>
          <template is="dom-if" if="[[smallScreen]]">
            <img class="logo" src="/img/opera_logo.png" alt="Opera Kansas">

            {{ $currentPage := . }}
            {{ range .Site.Menus.main }}
            <a class="{{if ($currentPage.IsMenuCurrent "main" .)}}active{{end}}" href="{{.URL}}">{{ .Name }}</a>
            {{ end }}
            <!-- Loop through navigation -->
          </template>
        </app-drawer>

        <app-header-layout>
          <app-header class="justified" condenses reveals effects="waterfall">
            <app-toolbar class="flag">
              <paper-icon-button hidden="[[!smallScreen]]" icon="menu" drawer-toggle></paper-icon-button>
              <img class="logo" src="/img/opera_logo.png" alt="Opera Kansas">
            </app-toolbar>

            <template is="dom-if" if="[[!smallScreen]]">
              <app-toolbar class="navbar" primary>
                {{ range .Site.Menus.main }}
                <a class="{{if ($currentPage.IsMenuCurrent "main" .)}}active{{end}}" href="{{.URL}}">{{ .Name }}</a>
                {{ end }}
              </app-toolbar>
            </template>
          </app-header>

          <div class="content">
            {{ .Content }}
          </div>
        </app-header-layout>
      </app-drawer-layout>
    </template>
  </body>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-54459064-1', 'auto');
    ga('send', 'pageview');
  </script>
</html>
